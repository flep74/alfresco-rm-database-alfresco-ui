<md-card>
    <md-card-title>
        <md-card-title-text>
            <span class="md-headline">ICD-10 diagnose</span>
        </md-card-title-text>
    </md-card-title>
    <md-card-content>
        <md-autocomplete flex 
            md-selected-item="case.diagnosis" 
            md-search-text="diagnosisSearch"
            md-items="diagnosis in dropdownFilter(dropdownOptions['diagnosis'],diagnosisSearch)" 
            md-item-text="diagnosis" 
            md-min-length="0" 
            md-floating-label="Hoveddiagnose"
            ng-disabled="!editPatientData">
            <md-item-template>
                <span md-highlight-text="diagnosisSearch" md-highlight-flags="gi">{{diagnosis}}</span>
            </md-item-template>
        </md-autocomplete>

        <md-autocomplete flex 
            ng-repeat="bd in bidiagnoses"
            md-selected-item="case.bidiagnoses[bd.id]" 
            md-search-text="bidiagnosisSearch[bd.id]"
            md-items="bidiagnosis in dropdownFilter(dropdownOptions['diagnosis'],bidiagnosisSearch[bd.id])" 
            md-item-text="bidiagnosis" 
            md-min-length="0" 
            md-floating-label="Bidiagnose"
            ng-disabled="!editPatientData">
            <md-item-template>
                <span md-highlight-text="bidiagnosisSearch[bd.id]" md-highlight-flags="gi">{{bidiagnosis}}</span>
            </md-item-template>
        </md-autocomplete>

    </md-card-content>
    <md-card-actions layout="row">
        <span flex></span>
        <md-button class="md-icon-button md-accent" ng-click="addNewBidiagnosis()" ng-disabled="!editPatientData || bidiagnoses.length==5">
            <md-icon>add</md-icon>
        </md-button>
    </md-card-actions>
</md-card>