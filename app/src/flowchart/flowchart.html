


<style>

.md-title {
    font-size: 15px;
     font-weight: bold;
}

.fixed_header{
    width: 400px;
    table-layout: fixed;
    border-collapse: collapse;
}

.fixed_header tbody{
  display:block;
  width: 100%;
  overflow: auto;

}

.fixed_header thead tr {
   display: block;
}

.fixed_header thead {

}

.fixed_header th, .fixed_header td {
  padding: 5px;
  text-align: left;
  width: 200px;
}



</style>



<md-card   >



    <md-content class="md-padding" layout-wrap >



        <md-content class="md-padding" layout="row" >
            <div flex="33" >
                <md-card>
                    <md-card-title >
                        <h1 class="md-title od-title-icon"> {{'COMMON.ALLE' | translate }}</h1>
                    </md-card-title>
                </md-card>
            </div>

            <div flex="33" >
                <md-card>
                    <md-card-title ng-click="vm.loaddata('arrestanter')">
                        <h1 class="md-title od-title-icon"> {{'COMMON.ARRESTANTER' | translate }} {{ vm.total.arrestanter }}</h1>
                    </md-card-title>
                </md-card>
            </div>

            <div flex="33" >
                <md-card>
                    <md-card-title ng-click="vm.loaddata('ongoing')">
                        <h1 class="md-title od-title-icon">{{'COMMON.IGANGVÆRENDE' | translate }} {{ vm.total.ongoing }}</h1>
                    </md-card-title>
                </md-card>
            </div>

            <div flex="33" >
                <md-card>
                    <md-card-title ng-click="vm.loaddata('waitinglist')">
                        <h1 class="md-title od-title-icon"> {{'COMMON.VENTELISTE' | translate }} {{ vm.total.waitinglist }}</h1>
                    </md-card-title>
                </md-card>
            </div>

            <div flex="33" >
                <md-card>
                    <md-card-title ng-click="vm.loaddata('observation')">
                        <h1 class="md-title od-title-icon"> {{'COMMON.INDLAGTE' | translate }} {{ vm.total.observation }}</h1>
                    </md-card-title>
                </md-card>
            </div>

            <div flex="33" >
                <md-card>
                    <md-card-title ng-click="vm.loaddata('ventendegr')">
                        <h1 class="md-title od-title-icon"> {{'COMMON.VENTEDEGR' | translate }} </h1>
                    </md-card-title>
                </md-card>
            </div>

            <div flex="33" >
                <md-card>
                    <md-card-title ng-click="vm.loaddata('user')">
                        <h1 class="md-title od-title-icon"> {{'COMMON.MINESAGER' | translate }} {{ vm.total.user }}</h1>
                    </md-card-title>
                </md-card>
            </div>



        </md-content>


        <!-- headlines -->
        <md-card >
            <md-content>


                <md-table-container >


                    <table class="fixed_header" md-table >

                    <thead md-head >
                    <tr md-row>
                        <th md-column >{{'FLOWCHART.CREATED' | translate}}</th>
                        <th md-column >{{'FLOWCHART.CPR' | translate}}</th>
                        <th md-column >{{'FLOWCHART.FORNAVN' | translate}}</th>
                        <th md-column >{{'FLOWCHART.EFTERNAVN' | translate}}</th>
                        <th md-column >{{'FLOWCHART.HOVEDSIGTELSE' | translate}}</th>
                    </tr>
                    </thead>

                    </table>
                    </md-table-container>

            </md-content>
        </md-card>

        <!-- contents -->
        <div  ng-repeat="i in vm.ongoing" >

        <md-card class="dropdown-card" id="{{ i.node_uuid }}" ng-hide="!(vm.editperid == i.node_uuid) && vm.startedit">


        <md-card-title  >


            <md-table-container >

                <table class="fixed_header" md-table >

                    <thead md-head >

                    <!--<md-icon class="rotate-arrow">keyboard_arrow_down</md-icon>-->

                    <tr md-row>
                        <th md-column > {{i.creationDate | customFlowChartDate }} </th>
                        <th md-column > {{i.cprNumber}}</th>
                        <th md-column >{{i.firstName}}</th>
                        <th md-column >{{i.lastName}}  </th>
                        <th md-column >{{i.mainCharge}} </th>
                    </tr>

                    </thead>

                </table>
            </md-table-container>
        </md-card-title>


         <md-content class="md-padding" layout-wrap ng-if="collapsed" >
         <!--<md-content class="md-padding" layout-wrap ng-if="false" >-->

             <md-table-container>

                 <table md-table>

                     <tbody md-body >

<!--display status + samtykke -->

                     <tr md-row class="clickable" ng-hide="vm.editperid == i.node_uuid" ng-click="vm.gotoCase(case.caseNumber)">
                             <td md-cell>Status</td>
                             <td md-cell id="statusDisplay_{{ i.node_uuid }}">{{i.status}}</td>

                             <td md-cell>Samtykke til oplysninger </td>
                             <td md-cell id="samtykkeDisplay_{{ i.node_uuid }}">{{i.samtykkeopl}}</td>
                     </tr>

<!--edit-->



                    <tr md-row class="clickable" ng-show="vm.editperid == i.node_uuid" ng-click="vm.gotoCase(case.caseNumber)">

                        <td md-cell>Status</td>

                        <div>
                            <td md-autocomplete
                                md-selected-item="i.status"
                                md-search-text="statusSearch"
                                md-items="status in vm.propertyFilter(vm.propertyValues['status'],statusSearch)"
                                md-item-text="status"
                                md-clear-button="true"
                                md-require-match="true">
                                <md-item-template>
                                    <span md-highlight-text="statusSearch" md-highlight-flags="gi">{{status}}</span>
                                </md-item-template>
                                </md-autocomplete>
                        </div>



                        <td md-cell>Samtykke til oplysninger</td>
                        <td md-input-container class="md-block">

                            <input ng-model="flow.samtykkeopl" >
                        </td >



                    </tr>


<!--display arrest + tolk -->

                    <tr md-row class="clickable" ng-if="!edit" ng-click="vm.gotoCase(case.caseNumber)">
                        <td md-cell>Arrest</td>
                        <td md-cell>{{i.arrest}}</td>

                        <td md-cell>Tolk sprog</td>
                        <td md-cell>{{i.tolksprog}}</td>
                    </tr>
<!--edit-->






                    <tr md-row class="clickable" ng-if="edit" ng-click="vm.gotoCase(case.caseNumber)">
                        <td md-cell>Arrest</td>
                        <td md-input-container class="md-block">

                            <input ng-model="flow.arrest" >
                        </td >

                        <td md-cell>Tolk sprog</td>
                        <td md-input-container class="md-block">

                            <input ng-model="flow.tolksprog" >
                        </td >
                    </tr>


<!--display socialrådgiver + fritid -->

                    <tr md-row class="clickable" ng-if="!edit" ng-click="vm.gotoCase(case.caseNumber)">
                        <td md-cell>Socialrådgiver</td>
                        <td md-cell>{{i.socialworker}}</td>

                        <td md-cell>Fritid ved (navne)</td>
                        <td md-cell>{{i.fritidved}}</td>
                    </tr>

<!--edit -->

                    <tr md-row class="clickable" ng-if="edit" ng-click="vm.gotoCase(case.caseNumber)">

                        <td md-cell>Socialrådgiver</td>

                        <div>
                            <td md-autocomplete
                                md-selected-item="i.socialworker"
                                md-search-text="socialworkerSearch"
                                md-items="socialworker in vm.propertyFilter(vm.propertyValues['socialworker'],socialworkerSearch)"
                                md-item-text="socialworker"
                                md-clear-button="true"
                                md-require-match="true">
                                <md-item-template>
                                    <span md-highlight-text="socialworkerSearch" md-highlight-flags="gi">{{socialworker}}</span>
                                </md-item-template>
                                </md-autocomplete>
                        </div>

                        </td>

                        <td md-cell>Fritid ved (navne)</td>

                        <td md-input-container class="md-block">

                            <input ng-model="flow.fritidved" >
                        </td >

                        </td>


                    </tr>


<!--display læge + kommentar -->

                     <tr md-row class="clickable" ng-if="!edit" ng-click="vm.gotoCase(case.caseNumber)">

                         <td md-cell>Læge</td>
                         <td md-cell>{{ i.doctor}}</td>

                         <td md-cell>Kommentar</td>
                         <td md-cell>{{i.kommentar }}</td>
                     </tr>


<!--edit -->

                     <tr md-row class="clickable" ng-if="edit" ng-click="vm.gotoCase(case.caseNumber)">

                         <td md-cell>Læge</td>

                         <div>
                         <td md-autocomplete
                                      md-selected-item="i.doctor"
                                      md-search-text="doctorSearch"
                                      md-items="doctor in vm.propertyFilter(vm.propertyValues['doctor'],doctorSearch)"
                                      md-item-text="doctor"
                                      md-clear-button="true"
                                          md-require-match="true">
                             <md-item-template>
                                 <span md-highlight-text="doctorSearch" md-highlight-flags="gi">{{doctor}}</span>
                             </md-item-template>
                         </md-autocomplete>
                         </div>

                         </td>


                         <td md-cell>Kommentar</td>

                         <td md-input-container class="md-block">

                             <input ng-model="flow.kommentar" >
                         </td >

                         </td>


                     </tr>

<!--display psykolog + kvalitetskontrol -->

                     <tr md-row class="clickable" ng-if="!edit" ng-click="vm.gotoCase(case.caseNumber)">

                         <td md-cell>Psykolog</td>
                         <td id="psychologistDisplay_{{ i.node_uuid }}" md-cell>{{ i.psychologist}}</td>

                         <td md-cell>Kvalitetskontrol</td>
                         <td md-cell>{{i.kvalitetskontrol}}</td>
                     </tr>


<!--edit -->

                    <tr md-row class="clickable" ng-show="vm.editperid == i.node_uuid" ng-click="vm.gotoCase(case.caseNumber)">

                        <td md-cell>Psykolog</td>

                        <div >
                            <td md-autocomplete
                                md-selected-item="flow.psychologist"
                                md-search-text="psychologistSearch"
                                md-items="psychologist in vm.propertyFilter(vm.propertyValues['psychologist'],psychologistSearch)"
                                md-item-text="psychologist"
                                md-clear-button="true"
                                md-require-match="true">
                                <md-item-template>
                                    <span md-highlight-text="psychologistSearch" md-highlight-flags="gi">{{psychologist}}</span>
                                </md-item-template>
                                </md-autocomplete>
                        </div>

                        </td>


                        <td md-cell>Kvalitetskontrol</td>

                        <td md-input-container class="md-block">

                            <input ng-model="flow.kvalitetskontrol" >
                        </td >

                        </td>


                    </tr>


<!--display psykolog fokus  + kommentar -->

                     <tr md-row class="clickable" ng-if="!edit" ng-click="vm.gotoCase(case.caseNumber)">
                         <td md-cell>Psykolog fokus</td>
                         <td md-cell>{{ i.psykologfokus}}</td>

                     </tr>


<!--edit -->

                    <tr md-row class="clickable" ng-if="edit" ng-click="vm.gotoCase(case.caseNumber)">
                        <td md-cell>Psykolog fokus</td>

                        <td md-input-container class="md-block">

                            <input ng-model="flow.psykologfokus" >
                        </td >
                    </tr>



                     </tbody>
                 </table>


             </md-table-container>
            </md-content>

            <md-card-actions tst="hej" layout="row" layout-align="end center" >
                <md-button class="md-icon-button" aria-label="icon">
                    <md-icon md-svg-icon="icon"></md-icon>
                </md-button>
                <!--<md-button ng-disabled="save" ng-click="collapsed=vm.editCase(i);edit=collapsed;save=collapsed;">ret  </md-button>-->
                <md-button ng-disabled="vm.saveShow" ng-click="collapsed=vm.editCase(i);save=collapsed; ">ret  </md-button>
                <md-button ng-click="save=false;edit=false;vm.save(i.node_uuid, i.doctor, i.socialworker, i.psychologist, i.status)" ng-show="vm.saveShow">gem</md-button>
                <md-button ng-click="save=false;edit=false;vm.cancel(i.node_uuid)" ng-show="vm.saveShow">annuller</md-button>
                <md-button ng-show="!collapsed" ng-click="collapsed=!collapsed;vm.updateCard(i)" > <md-icon>keyboard_arrow_down</md-icon> </md-button>
                <md-button ng-show="collapsed" ng-click="collapsed=!collapsed"> <md-icon>keyboard_arrow_up</md-icon> </md-button>


            </md-card-actions>



        </md-card>


        </div>

    </md-content>






</md-card>
    </th>
</tr>
</table>

